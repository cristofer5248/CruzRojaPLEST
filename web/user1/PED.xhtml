<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    template="../WEB-INF/template1.xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui"
    xmlns:b="http://bootsfaces.net/ui">

    <ui:define name="title">
        <title>PED - Planificacion y Desarrollo</title>        
        <!--        <h:outputScript name="js/utils.js"/>-->
        <!--<h:outputStylesheet name="css/selectcool.css"/>-->
    </ui:define>


    <ui:define name="contenido">
        <p:dialog header="POA" widgetVar="dlg2" modal="true" position="center center" height="200" width="300" class="modal-content1 ownModelstyle">            
            <h:form>                                       
                <h2 style="font-family: Roboto;">Seleciona un año</h2>
                <p:selectOneMenu value="#{poaBean.yearselected}" id="selectown" class="select-profession" style="width: 200px;">                    
                    <f:selectItem itemLabel="2020" itemValue="2020"/>
                    <f:selectItem itemLabel="2019" itemValue="2019"/>
                    <f:selectItem itemLabel="2018" itemValue="2018"/>
                    <f:selectItem itemLabel="2017" itemValue="2017"/>
                    <f:selectItem itemLabel="2016" itemValue="2016"/>
                    <f:selectItem itemLabel="2015" itemValue="2015"/>
                    <f:selectItem itemLabel="2014" itemValue="2014"/>
                    <f:selectItem itemLabel="2013" itemValue="2013"/>
                    <f:selectItem itemLabel="2012" itemValue="2012"/>
                    <f:selectItem itemLabel="2011" itemValue="2011"/>
                </p:selectOneMenu>
                <p:commandButton class="btn btn-amber amber1" style="color:white" action="#{areasBean.sendyear()}" value="Enviar"/>
            </h:form>            
        </p:dialog>        
        <div class="content1">
            <p:breadCrumb id="ownbreadCrumb" class="z-depth-4">
                <p:menuitem value="Categories" url="#" />
                <p:menuitem value="Areas Estrategicas" url="#" />
                <p:menuitem value="Año" url="#" rendered="#{pEDbean.yearselected>0}"/>
                <p:menuitem value="#{pEDbean.yearselected}" url="#" rendered="#{pEDbean.yearselected>0}"/>
                <p:menuitem value="Trimestre" url="#" rendered="#{pEDbean.trimestreselected>0}"/>
                <p:menuitem value="#{pEDbean.trimestreselected}" url="#" rendered="#{pEDbean.trimestreselected>0}"/>
            </p:breadCrumb>            

            <h:form>

                <p:dataTable id="tabla1" value="#{pEDbean.consolidatorList}" var="p" paginator="true" rows="10" 
                             emptyMessage="No hay Areas Estrategicas" rowIndexVar="i"
                             >

                    <p:columnGroup type="header">
                        <p:row>
                            <p:column headerText="Actividad" />
                            <p:column headerText="Indicadores" />
                            <p:column headerText="Año" />
                            <p:column headerText="Planificado" />
                            <p:column headerText="Ejecutado" />
                            <p:column headerText="Comentario" />
                            <p:column headerText="Sumary" />
                        </p:row>
                    </p:columnGroup>


                    <p:column headerText="Actividad" rendered="#{p.rowspan==1}" rowspan="#{p.rowspan2}"> 
                        <h:outputText  value="#{p.codigoPO.actividad}" id="base1"/>
                    </p:column>
                    <p:column headerText="Indicadores" rendered="#{p.rowspan==1}" rowspan="#{p.rowspan2}"> 
                        <h:outputText  value="#{p.codigoPO.indicatores.detalle}"/>
                    </p:column>                     

                    <!--DE AQUI COMIENZAN LOS DATOS DIFERENTES-->
                    <p:column>
                        <h:outputText  value="#{p.year}"/>
                    </p:column>
                    <p:column>
                        <h:outputText value="#{p.planificado}"/>
                    </p:column>
                    <p:column>
                        <h:outputText value="#{p.ejecutado}"/>
                    </p:column>
                    <p:column>
                        <h:outputText value="#{p.rowspan}"/>
                    </p:column>
                    <ui:repeat value="${pEDbean.listtotal}" var="to">
                        <p:column rendered="#{p.rowspan!=0}" rowspan="#{p.rowspan2}">
                        <h:outputText value="#{too[0]}"/>
                    </p:column>
                    </ui:repeat>
                </p:dataTable>

            </h:form>

        </div>
        <div class="fabs">
            <div class="fab"></div>
            <i class="avatar zmdi zmdi-plus" onclick="mostrar('form1');"></i>
            <!--                <h:commandButton styleClass="avatar zmdi zmdi-account">
                                <f:ajax render="@form"/>
                                DO NOT COMPLICATE WITH IT, IT'S JUST A BUTTON FOR OPENNING A FORM ALREADY WITH DATA
                            </h:commandButton>-->
        </div>

        <h:form id="form1" style="display:none;">
            <b:panelGrid columns="2" class="profiles"  style="margin-left: 30%; padding-right: 30px; padding-top: 40px">
                <h:outputLabel value="Nombres:" class="profile" style="margin-bottom: 25px;"/>
                <b:inputText value="${usersBean.users.nombre}" maxlength="40" mask="a{4,40}" class="profile" id="nombreform"/>
                <h:outputLabel value="Apellidos:" class="profile"/>
                <b:inputText value="${usersBean.users.apellidos}" maxlength="40" mask="a{4,40}" class="profile"/>
                <div class="col-lg-6" style="margin-top: 30px;">
                    <h:commandButton  action="#{usersBean.updateUser()}" value="Enviar" style="margin-top: 30px" onclick="verprogress();">

                    </h:commandButton>
                </div>
            </b:panelGrid>
        </h:form>          

        <h:outputScript>




        </h:outputScript>

    </ui:define>
</ui:composition>